<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‹±è¯­å­¦ä¹  - Daily English</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        header { text-align: center; color: white; margin-bottom: 30px; }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        header p { font-size: 1.1rem; opacity: 0.9; }
        .nav-tabs { display: flex; justify-content: center; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .nav-tab { padding: 12px 24px; background: rgba(255,255,255,0.2); border: none; border-radius: 25px; color: white; cursor: pointer; transition: all 0.3s; }
        .nav-tab:hover { background: rgba(255,255,255,0.3); transform: translateY(-2px); }
        .nav-tab.active { background: white; color: #667eea; }
        .card { background: white; border-radius: 20px; padding: 25px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); }
        .hidden { display: none !important; }
        .today-header { text-align: center; margin-bottom: 30px; }
        .today-date { font-size: 1.2rem; color: #718096; margin-bottom: 10px; }
        .today-badge { display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 8px 20px; border-radius: 20px; font-size: 0.9rem; margin-bottom: 20px; }
        .today-content { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 20px; padding: 30px; margin-bottom: 30px; }
        .today-phrase { font-size: 2rem; font-weight: 700; color: #2d3748; margin-bottom: 10px; text-align: center; }
        .today-phonetic { font-size: 1.1rem; color: #718096; text-align: center; margin-bottom: 20px; font-family: monospace; }
        .today-translation { font-size: 1.3rem; color: #4a5568; text-align: center; margin-bottom: 30px; padding: 15px; background: rgba(255,255,255,0.7); border-radius: 10px; }
        .today-section { margin-bottom: 25px; }
        .today-section-title { font-size: 1rem; font-weight: 600; color: #667eea; margin-bottom: 10px; }
        .today-section-content { color: #4a5568; line-height: 1.8; padding-left: 10px; }
        .today-example { background: white; padding: 15px; border-radius: 10px; margin: 10px 0; border-left: 4px solid #667eea; }
        .today-example-en { font-weight: 600; color: #2d3748; margin-bottom: 5px; }
        .today-example-cn { color: #718096; }
        .start-learning-btn { display: block; width: 100%; max-width: 300px; margin: 30px auto 0; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 30px; font-size: 1.1rem; cursor: pointer; }
        .start-learning-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4); }
        .calendar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .calendar-nav-btn { padding: 8px 16px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; }
        .calendar-nav-btn:hover { background: #5a67d8; }
        .calendar-month { font-size: 1.3rem; font-weight: 600; color: #2d3748; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 10px; }
        .calendar-weekday { text-align: center; font-weight: 600; color: #718096; padding: 10px; font-size: 0.9rem; }
        .calendar-day { aspect-ratio: 1; border: 2px solid #e2e8f0; border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; transition: all 0.3s; background: white; }
        .calendar-day:hover { border-color: #667eea; transform: translateY(-2px); }
        .calendar-day.other-month { opacity: 0.3; }
        .calendar-day.today { border-color: #667eea; background: linear-gradient(135deg, #667eea20 0%, #764ba220 100%); }
        .calendar-day.has-content { border-color: #48bb78; background: #f0fff4; }
        .calendar-day-number { font-size: 1.1rem; font-weight: 600; color: #2d3748; }
        .calendar-day.today .calendar-day-number { color: #667eea; }
        .calendar-day.has-content .calendar-day-number { color: #48bb78; }
        .calendar-day-indicator { width: 6px; height: 6px; background: #48bb78; border-radius: 50%; margin-top: 4px; }
        .history-modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center; padding: 20px; }
        .history-modal.active { display: flex; }
        .history-content { background: white; border-radius: 20px; max-width: 600px; width: 100%; max-height: 80vh; overflow-y: auto; padding: 30px; position: relative; }
        .history-close { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; cursor: pointer; color: #718096; }
        .history-close:hover { color: #2d3748; }
        .history-date { font-size: 1.1rem; color: #718096; margin-bottom: 15px; }
        .category-select { margin-bottom: 20px; }
        .category-select label { display: block; margin-bottom: 8px; font-weight: 600; color: #333; }
        .category-select select { width: 100%; padding: 12px; border: 2px solid #e0e0e0; border-radius: 10px; font-size: 1rem; cursor: pointer; }
        .category-select select:focus { outline: none; border-color: #667eea; }
        .phrase-card { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 15px; padding: 25px; margin-bottom: 20px; }
        .phrase-english { font-size: 1.8rem; font-weight: 700; color: #2d3748; margin-bottom: 10px; }
        .phrase-chinese { font-size: 1.2rem; color: #4a5568; margin-bottom: 15px; }
        .phrase-actions { display: flex; gap: 10px; flex-wrap: wrap; }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 0.95rem; transition: all 0.3s; }
        .btn-primary { background: #667eea; color: white; }
        .btn-primary:hover { background: #5a67d8; transform: translateY(-2px); }
        .btn-secondary { background: #48bb78; color: white; }
        .btn-secondary:hover { background: #38a169; }
        .btn-outline { background: transparent; border: 2px solid #667eea; color: #667eea; }
        .btn-outline:hover { background: #667eea; color: white; }
        .progress-bar { background: #e2e8f0; border-radius: 10px; height: 10px; margin-top: 10px; overflow: hidden; }
        .progress-fill { background: linear-gradient(90deg, #667eea, #764ba2); height: 100%; border-radius: 10px; transition: width 0.5s ease; }
        .quiz-container { text-align: center; }
        .quiz-question { font-size: 1.5rem; color: #2d3748; margin-bottom: 30px; padding: 30px; background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); border-radius: 15px; }
        .quiz-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .quiz-option { padding: 20px; background: white; border: 2px solid #e0e0e0; border-radius: 10px; cursor: pointer; transition: all 0.3s; font-size: 1.1rem; }
        .quiz-option:hover { border-color: #667eea; transform: translateY(-2px); }
        .quiz-option.correct { background: #c6f6d5; border-color: #48bb78; }
        .quiz-option.wrong { background: #fed7d7; border-color: #f56565; }
        .stats { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .stat-item { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; text-align: center; }
        .stat-number { font-size: 2rem; font-weight: 700; }
        .stat-label { font-size: 0.9rem; opacity: 0.9; }
        .phrases-list { display: grid; gap: 15px; }
        .phrase-item { background: #f7fafc; padding: 15px 20px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: all 0.3s; }
        .phrase-item:hover { background: #edf2f7; transform: translateX(5px); }
        .phrase-item.learned { background: #c6f6d5; }
        .phrase-item-en { font-weight: 600; color: #2d3748; font-size: 1.1rem; }
        .phrase-item-cn { color: #718096; font-size: 0.95rem; margin-top: 3px; }
        .icon-btn { width: 36px; height: 36px; border-radius: 50%; border: none; background: white; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .icon-btn:hover { transform: scale(1.1); }
        .icon-btn.speak { color: #667eea; }
        .icon-btn.check { color: #48bb78; }
        .icon-btn.checked { background: #48bb78; color: white; }
        .audio-btn { background: #667eea; color: white; border: none; border-radius: 50%; width: 32px; height: 32px; cursor: pointer; font-size: 0.9rem; margin-left: 8px; vertical-align: middle; transition: all 0.3s; }
        .audio-btn:hover { background: #5a67d8; transform: scale(1.1); }
        .audio-btn.large { width: 40px; height: 40px; font-size: 1.1rem; }
        .section-title { font-size: 1.5rem; color: #2d3748; margin-bottom: 20px; }
        .empty-state { text-align: center; padding: 50px; color: #718096; }
        @media (max-width: 768px) { header h1 { font-size: 1.8rem; } .today-phrase { font-size: 1.5rem; } .calendar-grid { gap: 5px; } .phrase-english { font-size: 1.4rem; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“ è‹±è¯­å­¦ä¹ </h1>
            <p>æ¯å¤©å­¦ä¸€ç‚¹ï¼Œè‹±è¯­è¿›æ­¥çœ‹å¾—è§</p>
        </header>

        <nav class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('today')">ğŸ“… ä»Šæ—¥æ¨é€</button>
            <button class="nav-tab" onclick="showSection('calendar')">ğŸ—“ï¸ å­¦ä¹ æ—¥å†</button>
            <button class="nav-tab" onclick="showSection('learn')">ğŸ“š çŸ­è¯­å­¦ä¹ </button>
            <button class="nav-tab" onclick="showSection('quiz')">ğŸ“ æµ‹è¯•æ¨¡å¼</button>
            <button class="nav-tab" onclick="showSection('list')">ğŸ“‹ çŸ­è¯­åˆ—è¡¨</button>
            <button class="nav-tab" onclick="showSection('stats')">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</button>
        </nav>

        <!-- ä»Šæ—¥æ¨é€ -->
        <div id="today-section" class="card">
            <div class="today-header">
                <div class="today-date" id="today-date"></div>
                <div class="today-badge">ğŸŒŸ ä»Šæ—¥æ¨è</div>
            </div>
            <div class="today-content" id="today-content"></div>
            <button class="start-learning-btn" onclick="showSection('learn')">ğŸš€ å¼€å§‹å­¦ä¹ æ›´å¤šçŸ­è¯­</button>
        </div>

        <!-- å­¦ä¹ æ—¥å† -->
        <div id="calendar-section" class="card hidden">
            <h2 class="section-title">ğŸ—“ï¸ å­¦ä¹ æ—¥å†</h2>
            <div class="calendar-header">
                <button class="calendar-nav-btn" onclick="changeMonth(-1)">â—€ ä¸Šæœˆ</button>
                <div class="calendar-month" id="calendar-month"></div>
                <button class="calendar-nav-btn" onclick="changeMonth(1)">ä¸‹æœˆ â–¶</button>
            </div>
            <div class="calendar-grid" id="calendar-grid"></div>
            <div style="margin-top: 20px; text-align: center; color: #718096;">
                <span style="margin-right: 20px;"><span style="width: 12px; height: 12px; background: #48bb78; border-radius: 50%; display: inline-block;"></span> æœ‰å­¦ä¹ å†…å®¹</span>
                <span><span style="width: 12px; height: 12px; background: #667eea; border-radius: 50%; display: inline-block;"></span> ä»Šå¤©</span>
            </div>
        </div>

        <!-- å†å²å¼¹çª— -->
        <div class="history-modal" id="history-modal" onclick="closeHistory(event)">
            <div class="history-content" onclick="event.stopPropagation()">
                <span class="history-close" onclick="closeHistory()">Ã—</span>
                <div class="history-date" id="history-date"></div>
                <div id="history-body"></div>
            </div>
        </div>

        <!-- å­¦ä¹ æ¨¡å¼ -->
        <div id="learn-section" class="card hidden">
            <div class="category-select">
                <label>é€‰æ‹©å­¦ä¹ ç±»åˆ«ï¼š</label>
                <select id="category-select" onchange="loadCategory()">
                    <option value="daily">ğŸŒ… æ—¥å¸¸ç”¨è¯­</option>
                    <option value="business">ğŸ’¼ å•†åŠ¡è‹±è¯­</option>
                    <option value="travel">âœˆï¸ æ—…è¡Œç”¨è¯­</option>
                    <option value="social">ğŸ‘¥ ç¤¾äº¤äº’åŠ¨</option>
                    <option value="emergency">ğŸ†˜ ç´§æ€¥æƒ…å†µ</option>
                </select>
            </div>
            <div id="phrase-display" class="phrase-card">
                <div class="phrase-english" id="current-phrase">Hello, how are you?</div>
                <div class="phrase-chinese" id="current-translation">ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿ</div>
                <div class="phrase-actions">
                    <button class="btn btn-primary" onclick="speakPhrase()">ğŸ”Š æœ—è¯»</button>
                    <button class="btn btn-secondary" onclick="markLearned()">âœ… å·²å­¦ä¼š</button>
                    <button class="btn btn-outline" onclick="nextPhrase()">ä¸‹ä¸€ä¸ª â¡ï¸</button>
                </div>
            </div>
            <div style="text-align: center; color: #718096;">
                <span id="current-index">1</span> / <span id="total-count">20</span>
                <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width: 5%"></div></div>
            </div>
        </div>

        <!-- æµ‹è¯•æ¨¡å¼ -->
        <div id="quiz-section" class="card hidden">
            <h2 class="section-title">ğŸ“ æµ‹è¯•ä½ çš„å­¦ä¹ æˆæœ</h2>
            <div id="quiz-container" class="quiz-container">
                <div class="quiz-question" id="quiz-question">ç‚¹å‡»"å¼€å§‹æµ‹è¯•"æ¥æ£€éªŒä½ çš„å­¦ä¹ æˆæœ</div>
                <div class="quiz-options" id="quiz-options"></div>
                <button class="btn btn-primary" id="quiz-start-btn" onclick="startQuiz()" style="font-size: 1.2rem; padding: 15px 40px;">å¼€å§‹æµ‹è¯•</button>
            </div>
        </div>

        <!-- çŸ­è¯­åˆ—è¡¨ -->
        <div id="list-section" class="card hidden">
            <h2 class="section-title">ğŸ“‹ å…¨éƒ¨çŸ­è¯­</h2>
            <div class="category-select">
                <select id="list-category-select" onchange="loadPhraseList()">
                    <option value="all">å…¨éƒ¨ç±»åˆ«</option>
                    <option value="daily">ğŸŒ… æ—¥å¸¸ç”¨è¯­</option>
                    <option value="business">ğŸ’¼ å•†åŠ¡è‹±è¯­</option>
                    <option value="travel">âœˆï¸ æ—…è¡Œç”¨è¯­</option>
                    <option value="social">ğŸ‘¥ ç¤¾äº¤äº’åŠ¨</option>
                    <option value="emergency">ğŸ†˜ ç´§æ€¥æƒ…å†µ</option>
                </select>
            </div>
            <div id="phrases-list" class="phrases-list"></div>
        </div>

        <!-- å­¦ä¹ ç»Ÿè®¡ -->
        <div id="stats-section" class="card hidden">
            <h2 class="section-title">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</h2>
            <div class="stats">
                <div class="stat-item"><div class="stat-number" id="stat-total">0</div><div class="stat-label">æ€»çŸ­è¯­æ•°</div></div>
                <div class="stat-item"><div class="stat-number" id="stat-learned">0</div><div class="stat-label">å·²å­¦ä¼š</div></div>
                <div class="stat-item"><div class="stat-number" id="stat-progress">0%</div><div class="stat-label">å­¦ä¹ è¿›åº¦</div></div>
                <div class="stat-item"><div class="stat-number" id="stat-quiz">0</div><div class="stat-label">æµ‹è¯•æ¬¡æ•°</div></div>
            </div>
            <div class="progress-bar" style="height: 20px; margin-top: 20px;"><div class="progress-fill" id="stats-progress-fill" style="width: 0%"></div></div>
            <p style="text-align: center; margin-top: 10px; color: #718096;">ä½ å·²ç»å®Œæˆäº† <span id="stats-percent">0%</span> çš„å­¦ä¹ ç›®æ ‡ï¼</p>
        </div>
    </div>

    <script>
// æ¯æ—¥æ¨é€æ•°æ®åº“
const dailyContents = {
    "2026-02-10": {
        phrase: "Break a leg!",
        phonetic: "/breÉªk É™ leÉ¡/",
        translation: "ç¥ä½ å¥½è¿ï¼ï¼ˆæ¼”å‡º/è¡¨æ¼”å‰å¸¸ç”¨ï¼‰",
        category: "ç¤¾äº¤äº’åŠ¨",
        scene: "ç”¨äºæˆå‰§ã€æ¼”å‡ºã€æ¼”è®²ã€é¢è¯•ç­‰åœºåˆå‰ç¥ç¦ä»–äººã€‚åƒä¸‡ä¸è¦æŒ‰å­—é¢ç†è§£æˆ'æ‘”æ–­è…¿'ï¼",
        examples: [
            { en: "Good luck on your presentation tonight. Break a leg!", cn: "ç¥ä½ ä»Šæ™šæ¼”è®²é¡ºåˆ©ï¼ŒåŠ æ²¹ï¼" },
            { en: "Break a leg at your audition tomorrow!", cn: "ç¥ä½ æ˜å¤©è¯•é•œæˆåŠŸï¼" }
        ],
        keywords: [
            { word: "break", phonetic: "/breÉªk/", meaning: "v. æ‰“ç ´ï¼ŒæŠ˜æ–­" },
            { word: "leg", phonetic: "/leÉ¡/", meaning: "n. è…¿" }
        ],
        explanation: "è¿™ä¸ªçŸ­è¯­çš„èµ·æºæœ‰å‡ ç§è¯´æ³•ï¼Œæœ€æµè¡Œçš„æ˜¯å‰§é™¢è¿·ä¿¡ï¼šç›´æ¥è¯´'good luck'åè€Œä¼šå¸¦æ¥å„è¿ï¼Œæ‰€ä»¥è¯´åè¯'break a leg'åè€Œèƒ½ç¥å¯¹æ–¹å¥½è¿ã€‚"
    },
    "2026-02-11": {
        phrase: "I'm running late.",
        phonetic: "/aÉªm ËˆrÊŒnÉªÅ‹ leÉªt/",
        translation: "æˆ‘è¦è¿Ÿåˆ°äº† / æˆ‘å¿«èµ¶ä¸ä¸Šäº†",
        category: "æ—¥å¸¸ç”¨è¯­",
        scene: "éå¸¸å®ç”¨çš„æ—¥å¸¸è¡¨è¾¾ï¼Œç”¨äºå‘ŠçŸ¥ä»–äººè‡ªå·±å¯èƒ½ä¼šæ™šåˆ°ã€‚é€‚ç”¨äºä¸Šç­ã€çº¦ä¼šã€ä¼šè®®ã€èšä¼šç­‰å„ç§åœºåˆã€‚",
        examples: [
            { en: "Sorry, I'm running late. Traffic is terrible today.", cn: "æŠ±æ­‰ï¼Œæˆ‘è¦è¿Ÿåˆ°äº†ã€‚ä»Šå¤©äº¤é€šå¤ªç³Ÿç³•äº†ã€‚" },
            { en: "Can we start the meeting in 10 minutes? I'm running late.", cn: "æˆ‘ä»¬èƒ½10åˆ†é’Ÿåå†å¼€å§‹ä¼šè®®å—ï¼Ÿæˆ‘è¦è¿Ÿåˆ°äº†ã€‚" }
        ],
        keywords: [
            { word: "running", phonetic: "/ËˆrÊŒnÉªÅ‹/", meaning: "adj. åœ¨è¿›è¡Œä¸­çš„" },
            { word: "late", phonetic: "/leÉªt/", meaning: "adj. è¿Ÿçš„" }
        ],
        explanation: "'Run late'æ˜¯è‹±è¯­ä¸­éå¸¸åœ°é“çš„è¡¨è¾¾ï¼Œè¡¨ç¤º'è¦è¿Ÿåˆ°äº†'ã€‚ç±»ä¼¼è¡¨è¾¾è¿˜æœ‰'running behind schedule'ã€‚"
    },
    "2026-02-09": {
        phrase: "I couldn't agree more.",
        phonetic: "/aÉª ËˆkÊŠdnt É™ËˆÉ¡riË mÉ”Ër/",
        translation: "æˆ‘å†åŒæ„ä¸è¿‡äº† / æˆ‘å®Œå…¨åŒæ„",
        category: "æ—¥å¸¸ç”¨è¯­",
        scene: "ç”¨äºå¼ºçƒˆè¡¨ç¤ºèµåŒå¯¹æ–¹çš„è§‚ç‚¹ã€‚æ¯”ç®€å•çš„'I agree'æ›´æœ‰åŠ›åº¦ï¼Œè¡¨è¾¾ç™¾åˆ†ä¹‹ç™¾çš„è®¤åŒã€‚",
        examples: [
            { en: "A: This pizza is amazing! B: I couldn't agree more!", cn: "A: è¿™ä¸ªæŠ«è¨å¤ªå¥½åƒäº†ï¼B: å®Œå…¨åŒæ„ï¼" },
            { en: "I couldn't agree more with your suggestion.", cn: "æˆ‘å®Œå…¨åŒæ„ä½ çš„å»ºè®®ã€‚" }
        ],
        keywords: [
            { word: "agree", phonetic: "/É™ËˆÉ¡riË/", meaning: "v. åŒæ„" },
            { word: "more", phonetic: "/mÉ”Ër/", meaning: "adv. æ›´ï¼Œæ›´å¤š" }
        ],
        explanation: "è¿™æ˜¯ä¸€ä¸ªåŒé‡å¦å®šè¡¨ç¤ºå¼ºè°ƒçš„å¥å¼ã€‚å­—é¢æ„æ€æ˜¯'æˆ‘ä¸èƒ½åŒæ„æ›´å¤šäº†'ï¼Œå®é™…æ„æ€æ˜¯'æˆ‘å·²ç»åŒæ„åˆ°æè‡´äº†'ã€‚"
    }
};

// çŸ­è¯­æ•°æ®åº“
const phrases = {
    daily: [
        { en: "Hello, how are you?", cn: "ä½ å¥½ï¼Œä½ å¥½å—ï¼Ÿ" },
        { en: "Nice to meet you.", cn: "å¾ˆé«˜å…´è®¤è¯†ä½ ã€‚" },
        { en: "Thank you very much.", cn: "éå¸¸æ„Ÿè°¢ã€‚" },
        { en: "You're welcome.", cn: "ä¸å®¢æ°”ã€‚" },
        { en: "Excuse me.", cn: "æ‰“æ‰°ä¸€ä¸‹ / å€Ÿè¿‡ã€‚" },
        { en: "I'm sorry.", cn: "å¯¹ä¸èµ·ã€‚" },
        { en: "No problem.", cn: "æ²¡é—®é¢˜ã€‚" },
        { en: "Have a good day!", cn: "ç¥ä½ ä»Šå¤©æ„‰å¿«ï¼" },
        { en: "See you later.", cn: "å›å¤´è§ã€‚" },
        { en: "Good morning!", cn: "æ—©ä¸Šå¥½ï¼" },
        { en: "Good night!", cn: "æ™šå®‰ï¼" },
        { en: "How's it going?", cn: "æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ" },
        { en: "Long time no see.", cn: "å¥½ä¹…ä¸è§ã€‚" },
        { en: "Take care.", cn: "ä¿é‡ã€‚" },
        { en: "I don't understand.", cn: "æˆ‘ä¸æ˜ç™½ã€‚" },
        { en: "Could you repeat that?", cn: "ä½ èƒ½å†è¯´ä¸€éå—ï¼Ÿ" },
        { en: "What do you think?", cn: "ä½ æ€ä¹ˆçœ‹ï¼Ÿ" },
        { en: "That sounds great!", cn: "å¬èµ·æ¥å¾ˆæ£’ï¼" },
        { en: "I'm not sure.", cn: "æˆ‘ä¸ç¡®å®šã€‚" },
        { en: "Let me think about it.", cn: "è®©æˆ‘æƒ³æƒ³ã€‚" }
    ],
    business: [
        { en: "Let's schedule a meeting.", cn: "æˆ‘ä»¬å®‰æ’ä¸ªä¼šè®®å§ã€‚" },
        { en: "I'll get back to you soon.", cn: "æˆ‘å¾ˆå¿«å›å¤ä½ ã€‚" },
        { en: "Can we discuss this?", cn: "æˆ‘ä»¬èƒ½è®¨è®ºä¸€ä¸‹è¿™ä¸ªå—ï¼Ÿ" },
        { en: "What's the deadline?", cn: "æˆªæ­¢æ—¥æœŸæ˜¯ä»€ä¹ˆæ—¶å€™ï¼Ÿ" },
        { en: "I'll handle it.", cn: "æˆ‘æ¥å¤„ç†ã€‚" },
        { en: "Let's touch base next week.", cn: "æˆ‘ä»¬ä¸‹å‘¨è”ç³»ä¸€ä¸‹ã€‚" },
        { en: "I'm tied up right now.", cn: "æˆ‘ç°åœ¨å¾ˆå¿™ã€‚" },
        { en: "Could you clarify that?", cn: "ä½ èƒ½è§£é‡Šä¸€ä¸‹å—ï¼Ÿ" },
        { en: "Let's move forward with this.", cn: "æˆ‘ä»¬ç»§ç»­æ¨è¿›è¿™ä¸ªå§ã€‚" },
        { en: "I need your input on this.", cn: "æˆ‘éœ€è¦ä½ åœ¨è¿™ä¸ªä¸Šçš„æ„è§ã€‚" },
        { en: "The bottom line is...", cn: "åº•çº¿æ˜¯..." },
        { en: "Let's think outside the box.", cn: "æˆ‘ä»¬è¦è·³å‡ºæ€ç»´å®šå¼ã€‚" },
        { en: "Can you give me a ballpark figure?", cn: "èƒ½ç»™æˆ‘ä¸€ä¸ªå¤§æ¦‚æ•°å­—å—ï¼Ÿ" },
        { en: "We need to streamline this process.", cn: "æˆ‘ä»¬éœ€è¦ç®€åŒ–è¿™ä¸ªæµç¨‹ã€‚" },
        { en: "Let's circle back to this.", cn: "æˆ‘ä»¬ç¨åå†å›åˆ°è¿™ä¸ªè¯é¢˜ã€‚" }
    ],
    travel: [
        { en: "Where is the bathroom?", cn: "æ´—æ‰‹é—´åœ¨å“ªé‡Œï¼Ÿ" },
        { en: "How much does this cost?", cn: "è¿™ä¸ªå¤šå°‘é’±ï¼Ÿ" },
        { en: "I'd like to check in.", cn: "æˆ‘æƒ³åŠç†å…¥ä½ã€‚" },
        { en: "Can I get the menu, please?", cn: "èƒ½ç»™æˆ‘èœå•å—ï¼Ÿ" },
        { en: "Is there Wi-Fi here?", cn: "è¿™é‡Œæœ‰Wi-Fiå—ï¼Ÿ" },
        { en: "What time does it open?", cn: "å‡ ç‚¹å¼€é—¨ï¼Ÿ" },
        { en: "I'd like a table for two.", cn: "æˆ‘æƒ³è¦ä¸€å¼ ä¸¤äººæ¡Œã€‚" },
        { en: "Can you recommend a good restaurant?", cn: "ä½ èƒ½æ¨èä¸€å®¶å¥½é¤å…å—ï¼Ÿ" },
        { en: "How do I get to...?", cn: "æˆ‘æ€ä¹ˆå»...ï¼Ÿ" },
        { en: "I'd like to book a room.", cn: "æˆ‘æƒ³é¢„è®¢ä¸€ä¸ªæˆ¿é—´ã€‚" },
        { en: "Is breakfast included?", cn: "åŒ…å«æ—©é¤å—ï¼Ÿ" },
        { en: "Can I have the bill, please?", cn: "èƒ½ç»™æˆ‘è´¦å•å—ï¼Ÿ" },
        { en: "Do you accept credit cards?", cn: "ä½ ä»¬æ”¶ä¿¡ç”¨å¡å—ï¼Ÿ" },
        { en: "I'm looking for...", cn: "æˆ‘åœ¨æ‰¾..." },
        { en: "It's too expensive.", cn: "å¤ªè´µäº†ã€‚" }
    ],
    social: [
        { en: "What do you do for fun?", cn: "ä½ å¹³æ—¶å–œæ¬¢åšä»€ä¹ˆï¼Ÿ" },
        { en: "Tell me about yourself.", cn: "è·Ÿæˆ‘è¯´è¯´ä½ è‡ªå·±ã€‚" },
        { en: "We should hang out sometime.", cn: "æˆ‘ä»¬åº”è¯¥æ‰¾ä¸ªæ—¶é—´å‡ºå»ç©ã€‚" },
        { en: "I'm having a party this weekend.", cn: "æˆ‘è¿™å‘¨æœ«æœ‰ä¸ªæ´¾å¯¹ã€‚" },
        { en: "Do you want to grab coffee?", cn: "ä½ æƒ³å»å–æ¯å’–å•¡å—ï¼Ÿ" },
        { en: "What's new with you?", cn: "ä½ æœ€è¿‘æ€ä¹ˆæ ·ï¼Ÿ" },
        { en: "Keep in touch!", cn: "ä¿æŒè”ç³»ï¼" },
        { en: "I'm just kidding.", cn: "æˆ‘å¼€ç©ç¬‘çš„ã€‚" },
        { en: "You crack me up!", cn: "ä½ å¤ªé€—äº†ï¼" },
        { en: "That's hilarious!", cn: "å¤ªå¥½ç¬‘äº†ï¼" },
        { en: "I'm down for whatever.", cn: "æˆ‘ä»€ä¹ˆéƒ½è¡Œã€‚" },
        { en: "Let's split the bill.", cn: "æˆ‘ä»¬AAå§ã€‚" },
        { en: "It's my treat.", cn: "æˆ‘è¯·å®¢ã€‚" },
        { en: "Cheers!", cn: "å¹²æ¯ï¼" },
        { en: "Bottoms up!", cn: "ä¸€é¥®è€Œå°½ï¼" }
    ],
    emergency: [
        { en: "Help!", cn: "æ•‘å‘½ï¼" },
        { en: "Call the police!", cn: "æŠ¥è­¦ï¼" },
        { en: "I need a doctor.", cn: "æˆ‘éœ€è¦åŒ»ç”Ÿã€‚" },
        { en: "Where is the hospital?", cn: "åŒ»é™¢åœ¨å“ªé‡Œï¼Ÿ" },
        { en: "I've lost my passport.", cn: "æˆ‘çš„æŠ¤ç…§ä¸¢äº†ã€‚" },
        { en: "I'm allergic to...", cn: "æˆ‘å¯¹...è¿‡æ•ã€‚" },
        { en: "It's an emergency!", cn: "è¿™æ˜¯ç´§æ€¥æƒ…å†µï¼" },
        { en: "Can you help me?", cn: "ä½ èƒ½å¸®æˆ‘å—ï¼Ÿ" },
        { en: "I don't feel well.", cn: "æˆ‘ä¸èˆ’æœã€‚" },
        { en: "Where is the nearest pharmacy?", cn: "æœ€è¿‘çš„è¯åº—åœ¨å“ªé‡Œï¼Ÿ" },
        { en: "My phone was stolen.", cn: "æˆ‘çš„æ‰‹æœºè¢«å·äº†ã€‚" },
        { en: "I need to contact my embassy.", cn: "æˆ‘éœ€è¦è”ç³»æˆ‘çš„å¤§ä½¿é¦†ã€‚" },
        { en: "I've been in an accident.", cn: "æˆ‘å‡ºäº‹æ•…äº†ã€‚" },
        { en: "Is there a doctor here?", cn: "è¿™é‡Œæœ‰åŒ»ç”Ÿå—ï¼Ÿ" },
        { en: "Please hurry!", cn: "è¯·å¿«ç‚¹ï¼" }
    ]
};

// çŠ¶æ€ç®¡ç†
let currentCategory = 'daily';
let currentIndex = 0;
let learnedPhrases = JSON.parse(localStorage.getItem('learnedPhrases') || '[]');
let quizStats = JSON.parse(localStorage.getItem('quizStats') || '{"total": 0, "correct": 0}');
let currentCalendarDate = new Date();

// åˆå§‹åŒ–
function init() {
    loadTodayContent();
    initCalendar();
    loadCategory();
    loadPhraseList();
    updateStats();
}

function getTodayString() {
    const today = new Date();
    return today.toISOString().split('T')[0];
}

function formatDate(date) {
    const weekdays = ['å‘¨æ—¥', 'å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­'];
    return `${date.getFullYear()}å¹´${date.getMonth() + 1}æœˆ${date.getDate()}æ—¥ ${weekdays[date.getDay()]}`;
}

function loadTodayContent() {
    const today = new Date();
    const dateStr = getTodayString();
    const content = dailyContents[dateStr];
    
    document.getElementById('today-date').textContent = formatDate(today);
    
    if (content) {
        document.getElementById('today-content').innerHTML = generateTodayHTML(content);
    } else {
        const exampleContent = dailyContents["2026-02-11"];
        document.getElementById('today-content').innerHTML = generateTodayHTML(exampleContent);
    }
}

function generateTodayHTML(content) {
    let examplesHTML = content.examples.map((ex, idx) => 
        `<div class="today-example">
            <div class="today-example-en">${ex.en} <button class="audio-btn" onclick="playText('${ex.en.replace(/'/g, "\\'")}')" title="æ’­æ”¾">ğŸ”Š</button></div>
            <div class="today-example-cn">${ex.cn}</div>
        </div>`
    ).join('');
    
    let keywordsHTML = content.keywords.map(kw => 
        `<div style="margin: 5px 0;"><strong>${kw.word}</strong> <button class="audio-btn" onclick="playText('${kw.word}')" title="æ’­æ”¾">ğŸ”Š</button> <span style="color: #718096; font-family: monospace;">${kw.phonetic}</span> - ${kw.meaning}</div>`
    ).join('');
    
    return `
        <div class="today-phrase">${content.phrase} <button class="audio-btn large" onclick="playText('${content.phrase.replace(/'/g, "\\'")}')" title="æ’­æ”¾">ğŸ”Š</button></div>
        <div class="today-phonetic">${content.phonetic}</div>
        <div class="today-translation">${content.translation}</div>
        <div class="today-section"><div class="today-section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</div><div class="today-section-content">${content.scene}</div></div>
        <div class="today-section"><div class="today-section-title">ğŸ“ ä¾‹å¥</div><div class="today-section-content">${examplesHTML}</div></div>
        <div class="today-section"><div class="today-section-title">ğŸ”¤ é‡ç‚¹è¯æ±‡</div><div class="today-section-content">${keywordsHTML}</div></div>
        <div class="today-section"><div class="today-section-title">ğŸ’¡ çŸ­è¯­è§£è¯»</div><div class="today-section-content">${content.explanation}</div></div>
    `;
}

function initCalendar() {
    renderCalendar();
}

function renderCalendar() {
    const year = currentCalendarDate.getFullYear();
    const month = currentCalendarDate.getMonth();
    
    document.getElementById('calendar-month').textContent = `${year}å¹´${month + 1}æœˆ`;
    
    const firstDay = new Date(year, month, 1);
    const lastDay = new Date(year, month + 1, 0);
    const prevLastDay = new Date(year, month, 0);
    
    const firstDayWeek = firstDay.getDay();
    const daysInMonth = lastDay.getDate();
    const daysInPrevMonth = prevLastDay.getDate();
    
    const weekdays = ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'];
    let html = weekdays.map(w => `<div class="calendar-weekday">${w}</div>`).join('');
    
    for (let i = firstDayWeek - 1; i >= 0; i--) {
        const day = daysInPrevMonth - i;
        html += `<div class="calendar-day other-month"><span class="calendar-day-number">${day}</span></div>`;
    }
    
    const today = new Date();
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const isToday = today.getFullYear() === year && today.getMonth() === month && today.getDate() === day;
        const hasContent = dailyContents[dateStr];
        
        let classes = 'calendar-day';
        if (isToday) classes += ' today';
        if (hasContent) classes += ' has-content';
        
        html += `<div class="${classes}" onclick="showHistory('${dateStr}')"><span class="calendar-day-number">${day}</span>${hasContent ? '<span class="calendar-day-indicator"></span>' : ''}</div>`;
    }
    
    const totalCells = Math.ceil((firstDayWeek + daysInMonth) / 7) * 7;
    const nextMonthDays = totalCells - (firstDayWeek + daysInMonth);
    for (let day = 1; day <= nextMonthDays; day++) {
        html += `<div class="calendar-day other-month"><span class="calendar-day-number">${day}</span></div>`;
    }
    
    document.getElementById('calendar-grid').innerHTML = html;
}

function changeMonth(delta) {
    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
    renderCalendar();
}

function showHistory(dateStr) {
    const content = dailyContents[dateStr];
    if (!content) {
        document.getElementById('history-date').textContent = dateStr;
        document.getElementById('history-body').innerHTML = `<div class="empty-state"><div style="font-size: 4rem; margin-bottom: 15px;">ğŸ“­</div><div>è¿™ä¸€å¤©æ²¡æœ‰å­¦ä¹ å†…å®¹</div></div>`;
    } else {
        document.getElementById('history-date').textContent = dateStr;
        document.getElementById('history-body').innerHTML = generateTodayHTML(content);
    }
    document.getElementById('history-modal').classList.add('active');
}

function closeHistory(event) {
    if (!event || event.target.id === 'history-modal' || event.target.className === 'history-close') {
        document.getElementById('history-modal').classList.remove('active');
    }
}

function showSection(section) {
    document.getElementById('today-section').classList.add('hidden');
    document.getElementById('calendar-section').classList.add('hidden');
    document.getElementById('learn-section').classList.add('hidden');
    document.getElementById('quiz-section').classList.add('hidden');
    document.getElementById('list-section').classList.add('hidden');
    document.getElementById('stats-section').classList.add('hidden');
    
    document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
    
    document.getElementById(section + '-section').classList.remove('hidden');
    
    const tabs = document.querySelectorAll('.nav-tab');
    const sectionNames = ['today', 'calendar', 'learn', 'quiz', 'list', 'stats'];
    const tabIndex = sectionNames.indexOf(section);
    if (tabIndex >= 0) tabs[tabIndex].classList.add('active');
    
    if (section === 'list') loadPhraseList();
    else if (section === 'stats') updateStats();
}

function loadCategory() {
    currentCategory = document.getElementById('category-select').value;
    currentIndex = 0;
    displayPhrase();
}

function displayPhrase() {
    const category = phrases[currentCategory];
    const phrase = category[currentIndex];
    
    document.getElementById('current-phrase').textContent = phrase.en;
    document.getElementById('current-translation').textContent = phrase.cn;
    document.getElementById('current-index').textContent = currentIndex + 1;
    document.getElementById('total-count').textContent = category.length;
    document.getElementById('progress-fill').style.width = ((currentIndex + 1) / category.length * 100) + '%';
}

function speakPhrase() {
    const phrase = document.getElementById('current-phrase').textContent;
    const utterance = new SpeechSynthesisUtterance(phrase);
    utterance.lang = 'en-US';
    utterance.rate = 0.8;
    speechSynthesis.speak(utterance);
}

function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'en-US';
    utterance.rate = 0.8;
    speechSynthesis.speak(utterance);
}

function playText(text) {
    speak(text);
}

function markLearned() {
    const phraseId = currentCategory + '-' + currentIndex;
    if (!learnedPhrases.includes(phraseId)) {
        learnedPhrases.push(phraseId);
        localStorage.setItem('learnedPhrases', JSON.stringify(learnedPhrases));
    }
    nextPhrase();
}

function nextPhrase() {
    const category = phrases[currentCategory];
    currentIndex = (currentIndex + 1) % category.length;
    displayPhrase();
}

function loadPhraseList() {
    const listCategory = document.getElementById('list-category-select').value;
    const container = document.getElementById('phrases-list');
    container.innerHTML = '';
    
    const categories = listCategory === 'all' ? Object.keys(phrases) : [listCategory];
    
    categories.forEach(cat => {
        phrases[cat].forEach((phrase, idx) => {
            const phraseId = cat + '-' + idx;
            const isLearned = learnedPhrases.includes(phraseId);
            
            const item = document.createElement('div');
            item.className = 'phrase-item' + (isLearned ? ' learned' : '');
            item.innerHTML = `
                <div class="phrase-item-content">
                    <div class="phrase-item-en">${phrase.en}</div>
                    <div class="phrase-item-cn">${phrase.cn}</div>
                </div>
                <div class="phrase-item-actions">
                    <button class="icon-btn speak" onclick="speak('${phrase.en.replace(/'/g, "\\'")}')">ğŸ”Š</button>
                    <button class="icon-btn check ${isLearned ? 'checked' : ''}" onclick="toggleLearned('${phraseId}', this)">${isLearned ? 'âœ“' : 'â—‹'}</button>
                </div>
            `;
            container.appendChild(item);
        });
    });
}

function toggleLearned(phraseId, btn) {
    if (learnedPhrases.includes(phraseId)) {
        learnedPhrases = learnedPhrases.filter(id => id !== phraseId);
        btn.classList.remove('checked');
        btn.textContent = 'â—‹';
    } else {
        learnedPhrases.push(phraseId);
        btn.classList.add('checked');
        btn.textContent = 'âœ“';
    }
    localStorage.setItem('learnedPhrases', JSON.stringify(learnedPhrases));
    loadPhraseList();
}

function updateStats() {
    let totalPhrases = 0;
    Object.values(phrases).forEach(cat => totalPhrases += cat.length);
    
    document.getElementById('stat-total').textContent = totalPhrases;
    document.getElementById('stat-learned').textContent = learnedPhrases.length;
    document.getElementById('stat-quiz').textContent = quizStats.total;
    
    const progress = Math.round(learnedPhrases.length / totalPhrases * 100);
    document.getElementById('stat-progress').textContent = progress + '%';
    document.getElementById('stats-progress-fill').style.width = progress + '%';
    document.getElementById('stats-percent').textContent = progress + '%';
}

let currentQuiz = null;

function startQuiz() {
    let allPhrases = [];
    Object.keys(phrases).forEach(cat => {
        phrases[cat].forEach((p, i) => allPhrases.push({...p, id: cat + '-' + i}));
    });
    
    allPhrases = allPhrases.sort(() => 0.5 - Math.random()).slice(0, 10);
    
    currentQuiz = { phrases: allPhrases, current: 0, correct: 0 };
    
    document.getElementById('quiz-start-btn').classList.add('hidden');
    showQuizQuestion();
}

function showQuizQuestion() {
    if (currentQuiz.current >= currentQuiz.phrases.length) {
        const accuracy = Math.round(currentQuiz.correct / currentQuiz.phrases.length * 100);
        document.getElementById('quiz-question').innerHTML = `<div style="font-size: 2rem; margin-bottom: 10px;">ğŸ‰</div>æµ‹è¯•å®Œæˆï¼<br>æ­£ç¡®ç‡ï¼š${currentQuiz.correct}/${currentQuiz.phrases.length} (${accuracy}%)`;
        document.getElementById('quiz-options').innerHTML = '';
        document.getElementById('quiz-start-btn').textContent = 'å†æµ‹ä¸€æ¬¡';
        document.getElementById('quiz-start-btn').classList.remove('hidden');
        
        quizStats.total++;
        localStorage.setItem('quizStats', JSON.stringify(quizStats));
        return;
    }
    
    const phrase = currentQuiz.phrases[currentQuiz.current];
    document.getElementById('quiz-question').innerHTML = `<div style="font-size: 0.9rem; color: #718096; margin-bottom: 10px;">é—®é¢˜ ${currentQuiz.current + 1} / ${currentQuiz.phrases.length}</div>"${phrase.cn}"`;
    
    const options = [phrase];
    let allOtherPhrases = [];
    Object.keys(phrases).forEach(cat => phrases[cat].forEach(p => { if (p.en !== phrase.en) allOtherPhrases.push(p); }));
    allOtherPhrases = allOtherPhrases.sort(() => 0.5 - Math.random()).slice(0, 3);
    options.push(...allOtherPhrases);
    options.sort(() => 0.5 - Math.random());
    
    const optionsContainer = document.getElementById('quiz-options');
    optionsContainer.innerHTML = '';
    
    options.forEach(opt => {
        const btn = document.createElement('div');
        btn.className = 'quiz-option';
        btn.textContent = opt.en;
        btn.onclick = () => checkAnswer(opt, phrase, btn);
        optionsContainer.appendChild(btn);
    });
}

function checkAnswer(selected, correct, btn) {
    const options = document.querySelectorAll('.quiz-option');
    options.forEach(opt => opt.style.pointerEvents = 'none');
    
    if (selected.en === correct.en) {
        btn.classList.add('correct');
        currentQuiz.correct++;
    } else {
        btn.classList.add('wrong');
        options.forEach(opt => { if (opt.textContent === correct.en) opt.classList.add('correct'); });
    }
    
    setTimeout(() => { currentQuiz.current++; showQuizQuestion(); }, 1500);
}

init();
    </script>
</body>
</html>
